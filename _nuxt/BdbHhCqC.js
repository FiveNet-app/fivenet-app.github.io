import{D as E,E as D,G as Pt,H as X,I as De,J as Lt,r as B,K as me,L as et,d as ne,M as ae,N as Ft,O as N,B as Z,P as zt,Q as tt,R as Bt,S as Ie,o as ge,U as Se,V as Nt,W as Vt,X as jt,Y as Ce,Z as Ne,F as Oe,$ as Ve,a0 as we,a1 as Dt,a2 as nt,a3 as Kt,a4 as Ut,a5 as Ke,a6 as J,a7 as st,a8 as Ue,a as Ht,a9 as Wt,aa as q,l as ot,ab as Re,ac as it,ad as lt,ae as rt,af as ve,b as F,c as U,n as z,t as ee,f as G,e as te,ag as Me,ah as H,w as ce,ai as ue,aj as Ee,ak as qt,j as Gt,al as Yt,am as He,an as at,ao as ut,ap as Te,aq as ct,ar as dt,as as Xt,at as Jt,g as ht,au as Qt,av as Zt,aw as en,ax as tn,ay as nn,y as sn,u as on,az as ln,aA as rn,aB as an,aC as un,aD as cn,aE as dn}from"./ZFkqaPzw.js";import{_ as ft,u as pt}from"./BrRWqVZ-.js";import{f as hn}from"./BVh1GoIi.js";import"./BIURV-Yl.js";const fn={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}};function pe(e,s,t){let o=t.initialDeps??[],n;return()=>{var i,r,l,u;let c;t.key&&((i=t.debug)!=null&&i.call(t))&&(c=Date.now());const a=e();if(!(a.length!==o.length||a.some((g,O)=>o[O]!==g)))return n;o=a;let f;if(t.key&&((r=t.debug)!=null&&r.call(t))&&(f=Date.now()),n=s(...a),t.key&&((l=t.debug)!=null&&l.call(t))){const g=Math.round((Date.now()-c)*100)/100,O=Math.round((Date.now()-f)*100)/100,R=O/16,T=(I,k)=>{for(I=String(I);I.length<k;)I=" "+I;return I};console.info(`%c⏱ ${T(O,5)} /${T(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,n),n}}function Ae(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const pn=(e,s)=>Math.abs(e-s)<1,vn=(e,s)=>{let t;return function(...o){clearTimeout(t),t=setTimeout(()=>e.apply(this,o),s)}},mn=e=>e,gn=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),o=[];for(let n=s;n<=t;n++)o.push(n);return o},bn=(e,s)=>{const t=e.scrollElement;if(!t)return;const o=i=>{const{width:r,height:l}=i;s({width:Math.round(r),height:Math.round(l)})};if(o(t.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const n=new ResizeObserver(i=>{const r=i[0];if(r!=null&&r.borderBoxSize){const l=r.borderBoxSize[0];if(l){o({width:l.inlineSize,height:l.blockSize});return}}o(t.getBoundingClientRect())});return n.observe(t,{box:"border-box"}),()=>{n.unobserve(t)}},We={passive:!0},yn=typeof window>"u"?!0:"onscrollend"in window,xn=(e,s)=>{const t=e.scrollElement;if(!t)return;let o=0;const n=yn?()=>{}:vn(()=>{s(o,!1)},150),i=u=>()=>{o=t[e.options.horizontal?"scrollLeft":"scrollTop"],n(),s(o,u)},r=i(!0),l=i(!1);return l(),t.addEventListener("scroll",r,We),t.addEventListener("scrollend",l,We),()=>{t.removeEventListener("scroll",r),t.removeEventListener("scrollend",l)}},In=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},Sn=(e,{adjustments:s=0,behavior:t},o)=>{var n,i;const r=e+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:r,behavior:t})};class On{constructor(s){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(typeof ResizeObserver<"u"?t=new ResizeObserver(n=>{n.forEach(i=>{this._measureElement(i.target,i)})}):null);return{disconnect:()=>{var n;return(n=o())==null?void 0:n.disconnect()},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,n])=>{typeof n>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:mn,rangeExtractor:gn,onChange:()=>{},measureElement:In,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,...t}},this.notify=(t,o)=>{var n,i;const{startIndex:r,endIndex:l}=this.range??{startIndex:void 0,endIndex:void 0},u=this.calculateRange();(t||r!==(u==null?void 0:u.startIndex)||l!==(u==null?void 0:u.endIndex))&&((i=(n=this.options).onChange)==null||i.call(n,this,o))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const t=this.options.getScrollElement();this.scrollElement!==t&&(this.cleanup(),this.scrollElement=t,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(o,n)=>{this.scrollAdjustments=0,this.scrollDirection=n?this.scrollOffset<o?"forward":"backward":null,this.scrollOffset=o;const i=this.isScrolling;this.isScrolling=n,this.notify(i!==n,n)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=pe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(t,o,n,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:n,getItemKey:i}),{key:!1}),this.getFurthestMeasurement=(t,o)=>{const n=new Map,i=new Map;for(let r=o-1;r>=0;r--){const l=t[r];if(n.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((r,l)=>r.end===l.end?r.index-l.index:r.end-l.end)[0]:void 0},this.getMeasurements=pe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:n,getItemKey:i},r)=>{const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<t;c++){const a=i(c),d=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),f=d?d.end+this.options.gap:o+n,g=r.get(a),O=typeof g=="number"?g:this.options.estimateSize(c),R=f+O,T=d?d.lane:c%this.options.lanes;u[c]={index:c,start:f,size:O,end:R,key:a,lane:T}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=pe(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(t,o,n)=>this.range=t.length>0&&o>0?wn({measurements:t,outerSize:o,scrollOffset:n}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=pe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,o,n,i)=>o===null?[]:t({startIndex:o.startIndex,endIndex:o.endIndex,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,n=t.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const n=this.measurementsCache[this.indexFromElement(t)];if(!n||!t.isConnected){this.measureElementCache.forEach((l,u)=>{l===t&&(this.observer.unobserve(t),this.measureElementCache.delete(u))});return}const i=this.measureElementCache.get(n.key);i!==t&&(i&&this.observer.unobserve(i),this.observer.observe(t),this.measureElementCache.set(n.key,t));const r=this.options.measureElement(t,o,this);this.resizeItem(n,r)},this.resizeItem=(t,o)=>{const n=this.itemSizeCache.get(t.key)??t.size,i=o-n;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(t,i,this):t.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,o)),this.notify(!0,!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=pe(()=>[this.getIndexes(),this.getMeasurements()],(t,o)=>{const n=[];for(let i=0,r=t.length;i<r;i++){const l=t[i],u=o[l];n.push(u)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();return Ae(o[vt(0,o.length-1,n=>Ae(o[n]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const n=this.getSize();o==="auto"&&(t<=this.scrollOffset?o="start":t>=this.scrollOffset+n?o="end":o="start"),o==="start"?t=t:o==="end"?t=t-n:o==="center"&&(t=t-n/2);const i=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-this.getSize();return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=Ae(this.getMeasurements()[t]);if(o==="auto")if(n.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)o="end";else if(n.start<=this.scrollOffset+this.options.scrollPaddingStart)o="start";else return[this.scrollOffset,o];const i=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,o),o]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:o="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[i,r]=this.getOffsetForIndex(t,o);this._scrollToOffset(i,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(t))){const[u]=this.getOffsetForIndex(t,r);pn(u,this.scrollOffset)||this.scrollToIndex(t,{align:r,behavior:n})}else this.scrollToIndex(t,{align:r,behavior:n})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let n;return o.length===0?n=this.options.paddingStart:n=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(i=>i.end)),n-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:o,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:o},this)},this.measure=()=>{var t,o;this.itemSizeCache=new Map,(o=(t=this.options).onChange)==null||o.call(t,this,!1)},this.setOptions(s),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}),this.notify(!1,!1)}}const vt=(e,s,t,o)=>{for(;e<=s;){const n=(e+s)/2|0,i=t(n);if(i<o)e=n+1;else if(i>o)s=n-1;else return n}return 0};function wn({measurements:e,outerSize:s,scrollOffset:t}){const o=e.length-1,i=vt(0,o,l=>e[l].start,t);let r=i;for(;r<o&&e[r].end<t+s;)r++;return{startIndex:i,endIndex:r}}function Mn(e){const s=new On(D(e)),t=Pt(s),o=s._didMount();return X(()=>D(e).getScrollElement(),n=>{n&&s._willUpdate()},{immediate:!0}),X(()=>D(e),n=>{s.setOptions({...n,onChange:(i,r)=>{var l;De(t),(l=n.onChange)==null||l.call(n,i,r)}}),s._willUpdate(),De(t)},{immediate:!0}),Lt(o),t}function En(e){return Mn(E(()=>({observeElementRect:bn,observeElementOffset:xn,scrollToFn:Sn,...D(e)})))}function kn(e,s,t){let o=B(t==null?void 0:t.value),n=E(()=>e.value!==void 0);return[E(()=>n.value?e.value:o.value),function(i){return n.value||(o.value=i),s==null?void 0:s(i)}]}function qe(e){return[e.screenX,e.screenY]}function Cn(){let e=B([-1,-1]);return{wasMoved(s){let t=qe(s);return e.value[0]===t[0]&&e.value[1]===t[1]?!1:(e.value=t,!0)},update(s){e.value=qe(s)}}}function Rn({container:e,accept:s,walk:t,enabled:o}){me(()=>{let n=e.value;if(!n||o!==void 0&&!o.value)return;let i=et(e);if(!i)return;let r=Object.assign(u=>s(u),{acceptNode:s}),l=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,r,!1);for(;l.nextNode();)t(l.currentNode)})}function An(e){throw new Error("Unexpected object: "+e)}var V=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(V||{});function Ge(e,s){let t=s.resolveItems();if(t.length<=0)return null;let o=s.resolveActiveIndex(),n=o??-1;switch(e.focus){case 0:{for(let i=0;i<t.length;++i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 1:{n===-1&&(n=t.length);for(let i=n-1;i>=0;--i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 2:{for(let i=n+1;i<t.length;++i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 3:{for(let i=t.length-1;i>=0;--i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 4:{for(let i=0;i<t.length;++i)if(s.resolveId(t[i],i,t)===e.id)return i;return o}case 5:return null;default:An(e)}}function mt(e={},s=null,t=[]){for(let[o,n]of Object.entries(e))bt(t,gt(s,o),n);return t}function gt(e,s){return e?e+"["+s+"]":s}function bt(e,s,t){if(Array.isArray(t))for(let[o,n]of t.entries())bt(e,gt(s,o.toString()),n);else t instanceof Date?e.push([s,t.toISOString()]):typeof t=="boolean"?e.push([s,t?"1":"0"]):typeof t=="string"?e.push([s,t]):typeof t=="number"?e.push([s,`${t}`]):t==null?e.push([s,""]):mt(t,s,e)}var $n={};function Tn(e,s){return e===s}var _n=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_n||{}),Pn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Pn||{}),Ln=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Ln||{});let yt=Symbol("ComboboxContext");function be(e){let s=nt(yt,null);if(s===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,be),t}return s}let xt=Symbol("VirtualContext"),Fn=ne({name:"VirtualProvider",setup(e,{slots:s}){let t=be("VirtualProvider"),o=E(()=>{let l=N(t.optionsRef);if(!l)return{start:0,end:0};let u=window.getComputedStyle(l);return{start:parseFloat(u.paddingBlockStart||u.paddingTop),end:parseFloat(u.paddingBlockEnd||u.paddingBottom)}}),n=En(E(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return N(t.optionsRef)},overscan:12}))),i=E(()=>{var l;return(l=t.virtual.value)==null?void 0:l.options}),r=B(0);return X([i],()=>{r.value+=1}),tt(xt,t.virtual.value?n:null),()=>[Se("div",{style:{position:"relative",width:"100%",height:`${n.value.getTotalSize()}px`},ref:l=>{if(l){if(typeof process<"u"&&$n.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&n.value.scrollToIndex(t.activeOptionIndex.value)}}},n.value.getVirtualItems().map(l=>Kt(s.default({option:t.virtual.value.options[l.index],open:t.comboboxState.value===0})[0],{key:`${r.value}-${l.index}`,"data-index":l.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":l.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`,overflowAnchor:"none"}})))]}}),zn=ne({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:s,attrs:t,emit:o}){let n=B(1),i=B(null),r=B(null),l=B(null),u=B(null),c=B({static:!1,hold:!1}),a=B([]),d=B(null),f=B(2),g=B(!1);function O(m=b=>b){let b=d.value!==null?a.value[d.value]:null,M=m(a.value.slice()),p=M.length>0&&M[0].dataRef.order.value!==null?M.sort((S,w)=>S.dataRef.order.value-w.dataRef.order.value):Ut(M,S=>N(S.dataRef.domRef)),v=b?p.indexOf(b):null;return v===-1&&(v=null),{options:p,activeOptionIndex:v}}let R=E(()=>e.multiple?1:0),T=E(()=>e.nullable),[I,k]=kn(E(()=>e.modelValue),m=>o("update:modelValue",m),E(()=>e.defaultValue)),L=E(()=>I.value===void 0?ae(R.value,{1:[],0:void 0}):I.value),y=null,_=null;function $(m){return ae(R.value,{0(){return k==null?void 0:k(m)},1:()=>{let b=Z(h.value.value).slice(),M=Z(m),p=b.findIndex(v=>h.compare(M,Z(v)));return p===-1?b.push(M):b.splice(p,1),k==null?void 0:k(b)}})}let x=E(()=>{});X([x],([m],[b])=>{if(h.virtual.value&&m&&b&&d.value!==null){let M=m.indexOf(b[d.value]);M!==-1?d.value=M:d.value=null}});let h={comboboxState:n,value:L,mode:R,compare(m,b){if(typeof e.by=="string"){let M=e.by;return(m==null?void 0:m[M])===(b==null?void 0:b[M])}return e.by===null?Tn(m,b):e.by(m,b)},calculateIndex(m){return h.virtual.value?e.by===null?h.virtual.value.options.indexOf(m):h.virtual.value.options.findIndex(b=>h.compare(b,m)):a.value.findIndex(b=>h.compare(b.dataRef.value,m))},defaultValue:E(()=>e.defaultValue),nullable:T,immediate:E(()=>!1),virtual:E(()=>null),inputRef:r,labelRef:i,buttonRef:l,optionsRef:u,disabled:E(()=>e.disabled),options:a,change(m){k(m)},activeOptionIndex:E(()=>{if(g.value&&d.value===null&&(h.virtual.value?h.virtual.value.options.length>0:a.value.length>0)){if(h.virtual.value){let b=h.virtual.value.options.findIndex(M=>{var p;return!((p=h.virtual.value)!=null&&p.disabled(M))});if(b!==-1)return b}let m=a.value.findIndex(b=>!b.dataRef.disabled);if(m!==-1)return m}return d.value}),activationTrigger:f,optionsPropsRef:c,closeCombobox(){g.value=!1,!e.disabled&&n.value!==1&&(n.value=1,d.value=null)},openCombobox(){if(g.value=!0,!e.disabled&&n.value!==0){if(h.value.value){let m=h.calculateIndex(h.value.value);m!==-1&&(d.value=m)}n.value=0}},setActivationTrigger(m){f.value=m},goToOption(m,b,M){g.value=!1,y!==null&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{if(e.disabled||u.value&&!c.value.static&&n.value===1)return;if(h.virtual.value){d.value=m===V.Specific?b:Ge({focus:m},{resolveItems:()=>h.virtual.value.options,resolveActiveIndex:()=>{var S,w;return(w=(S=h.activeOptionIndex.value)!=null?S:h.virtual.value.options.findIndex(P=>{var j;return!((j=h.virtual.value)!=null&&j.disabled(P))}))!=null?w:null},resolveDisabled:S=>h.virtual.value.disabled(S),resolveId(){throw new Error("Function not implemented.")}}),f.value=M??2;return}let p=O();if(p.activeOptionIndex===null){let S=p.options.findIndex(w=>!w.dataRef.disabled);S!==-1&&(p.activeOptionIndex=S)}let v=m===V.Specific?b:Ge({focus:m},{resolveItems:()=>p.options,resolveActiveIndex:()=>p.activeOptionIndex,resolveId:S=>S.id,resolveDisabled:S=>S.dataRef.disabled});d.value=v,f.value=M??2,a.value=p.options})},selectOption(m){let b=a.value.find(p=>p.id===m);if(!b)return;let{dataRef:M}=b;$(M.value)},selectActiveOption(){if(h.activeOptionIndex.value!==null){if(h.virtual.value)$(h.virtual.value.options[h.activeOptionIndex.value]);else{let{dataRef:m}=a.value[h.activeOptionIndex.value];$(m.value)}h.goToOption(V.Specific,h.activeOptionIndex.value)}},registerOption(m,b){let M=Ft({id:m,dataRef:b});if(h.virtual.value){a.value.push(M);return}_&&cancelAnimationFrame(_);let p=O(v=>(v.push(M),v));d.value===null&&h.isSelected(b.value.value)&&(p.activeOptionIndex=p.options.indexOf(M)),a.value=p.options,d.value=p.activeOptionIndex,f.value=2,p.options.some(v=>!N(v.dataRef.domRef))&&(_=requestAnimationFrame(()=>{let v=O();a.value=v.options,d.value=v.activeOptionIndex}))},unregisterOption(m,b){if(y!==null&&cancelAnimationFrame(y),b&&(g.value=!0),h.virtual.value){a.value=a.value.filter(p=>p.id!==m);return}let M=O(p=>{let v=p.findIndex(S=>S.id===m);return v!==-1&&p.splice(v,1),p});a.value=M.options,d.value=M.activeOptionIndex,f.value=2},isSelected(m){return ae(R.value,{0:()=>h.compare(Z(h.value.value),Z(m)),1:()=>Z(h.value.value).some(b=>h.compare(Z(b),Z(m)))})},isActive(m){return d.value===h.calculateIndex(m)}};zt([r,l,u],()=>h.closeCombobox(),E(()=>n.value===0)),tt(yt,h),Bt(E(()=>ae(n.value,{0:Ie.Open,1:Ie.Closed})));let A=E(()=>{var m;return(m=N(r))==null?void 0:m.closest("form")});return ge(()=>{X([A],()=>{if(!A.value||e.defaultValue===void 0)return;function m(){h.change(e.defaultValue)}return A.value.addEventListener("reset",m),()=>{var b;(b=A.value)==null||b.removeEventListener("reset",m)}},{immediate:!0})}),()=>{var m,b,M;let{name:p,disabled:v,form:S,...w}=e,P={open:n.value===0,disabled:v,activeIndex:h.activeOptionIndex.value,activeOption:h.activeOptionIndex.value===null?null:h.virtual.value?h.virtual.value.options[(m=h.activeOptionIndex.value)!=null?m:0]:(M=(b=h.options.value[h.activeOptionIndex.value])==null?void 0:b.dataRef.value)!=null?M:null,value:L.value};return Se(Oe,[...p!=null&&L.value!=null?mt({[p]:L.value}).map(([j,oe])=>Se(Nt,Vt({features:jt.Hidden,key:j,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:S,disabled:v,name:j,value:oe}))):[],Ce({theirProps:{...t,...Ne(w,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:P,slots:s,attrs:t,name:"Combobox"})])}}}),Bn=ne({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:s,attrs:t,slots:o,expose:n}){var i;let r=(i=e.id)!=null?i:`headlessui-combobox-input-${Ve()}`,l=be("ComboboxInput"),u=E(()=>et(N(l.inputRef))),c={value:!1};n({el:l.inputRef,$el:l.inputRef});function a(){l.change(null);let y=N(l.optionsRef);y&&(y.scrollTop=0),l.goToOption(V.Nothing)}let d=E(()=>{var y;let _=l.value.value;return N(l.inputRef)?typeof e.displayValue<"u"&&_!==void 0?(y=e.displayValue(_))!=null?y:"":typeof _=="string"?_:"":""});ge(()=>{X([d,l.comboboxState,u],([y,_],[$,x])=>{if(c.value)return;let h=N(l.inputRef);h&&((x===0&&_===1||y!==$)&&(h.value=y),requestAnimationFrame(()=>{var A;if(c.value||!h||((A=u.value)==null?void 0:A.activeElement)!==h)return;let{selectionStart:m,selectionEnd:b}=h;Math.abs((b??0)-(m??0))===0&&m===0&&h.setSelectionRange(h.value.length,h.value.length)}))},{immediate:!0}),X([l.comboboxState],([y],[_])=>{if(y===0&&_===1){if(c.value)return;let $=N(l.inputRef);if(!$)return;let x=$.value,{selectionStart:h,selectionEnd:A,selectionDirection:m}=$;$.value="",$.value=x,m!==null?$.setSelectionRange(h,A,m):$.setSelectionRange(h,A)}})});let f=B(!1);function g(){f.value=!0}function O(){Ke().nextFrame(()=>{f.value=!1})}function R(y){switch(c.value=!0,y.key){case J.Enter:if(c.value=!1,l.comboboxState.value!==0||f.value)return;if(y.preventDefault(),y.stopPropagation(),l.activeOptionIndex.value===null){l.closeCombobox();return}l.selectActiveOption(),l.mode.value===0&&l.closeCombobox();break;case J.ArrowDown:return c.value=!1,y.preventDefault(),y.stopPropagation(),ae(l.comboboxState.value,{0:()=>l.goToOption(V.Next),1:()=>l.openCombobox()});case J.ArrowUp:return c.value=!1,y.preventDefault(),y.stopPropagation(),ae(l.comboboxState.value,{0:()=>l.goToOption(V.Previous),1:()=>{l.openCombobox(),st(()=>{l.value.value||l.goToOption(V.Last)})}});case J.Home:if(y.shiftKey)break;return c.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.First);case J.PageUp:return c.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.First);case J.End:if(y.shiftKey)break;return c.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.Last);case J.PageDown:return c.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.Last);case J.Escape:if(c.value=!1,l.comboboxState.value!==0)return;y.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&y.stopPropagation(),l.nullable.value&&l.mode.value===0&&l.value.value===null&&a(),l.closeCombobox();break;case J.Tab:if(c.value=!1,l.comboboxState.value!==0)return;l.mode.value===0&&l.activationTrigger.value!==1&&l.selectActiveOption(),l.closeCombobox();break}}function T(y){s("change",y),l.nullable.value&&l.mode.value===0&&y.target.value===""&&a(),l.openCombobox()}function I(y){var _,$,x;let h=(_=y.relatedTarget)!=null?_:Ue.find(A=>A!==y.currentTarget);if(c.value=!1,!(($=N(l.optionsRef))!=null&&$.contains(h))&&!((x=N(l.buttonRef))!=null&&x.contains(h))&&l.comboboxState.value===0)return y.preventDefault(),l.mode.value===0&&(l.nullable.value&&l.value.value===null?a():l.activationTrigger.value!==1&&l.selectActiveOption()),l.closeCombobox()}function k(y){var _,$,x;let h=(_=y.relatedTarget)!=null?_:Ue.find(A=>A!==y.currentTarget);($=N(l.buttonRef))!=null&&$.contains(h)||(x=N(l.optionsRef))!=null&&x.contains(h)||l.disabled.value||l.immediate.value&&l.comboboxState.value!==0&&(l.openCombobox(),Ke().nextFrame(()=>{l.setActivationTrigger(1)}))}let L=E(()=>{var y,_,$,x;return(x=($=(_=e.defaultValue)!=null?_:l.defaultValue.value!==void 0?(y=e.displayValue)==null?void 0:y.call(e,l.defaultValue.value):null)!=null?$:l.defaultValue.value)!=null?x:""});return()=>{var y,_,$,x,h,A,m;let b={open:l.comboboxState.value===0},{displayValue:M,onChange:p,...v}=e,S={"aria-controls":(y=l.optionsRef.value)==null?void 0:y.id,"aria-expanded":l.comboboxState.value===0,"aria-activedescendant":l.activeOptionIndex.value===null?void 0:l.virtual.value?(_=l.options.value.find(w=>!l.virtual.value.disabled(w.dataRef.value)&&l.compare(w.dataRef.value,l.virtual.value.options[l.activeOptionIndex.value])))==null?void 0:_.id:($=l.options.value[l.activeOptionIndex.value])==null?void 0:$.id,"aria-labelledby":(A=(x=N(l.labelRef))==null?void 0:x.id)!=null?A:(h=N(l.buttonRef))==null?void 0:h.id,"aria-autocomplete":"list",id:r,onCompositionstart:g,onCompositionend:O,onKeydown:R,onInput:T,onFocus:k,onBlur:I,role:"combobox",type:(m=t.type)!=null?m:"text",tabIndex:0,ref:l.inputRef,defaultValue:L.value,disabled:l.disabled.value===!0?!0:void 0};return Ce({ourProps:S,theirProps:v,slot:b,attrs:t,slots:o,features:we.RenderStrategy|we.Static,name:"ComboboxInput"})}}}),Nn=ne({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:s,slots:t,expose:o}){let n=be("ComboboxOptions"),i=`headlessui-combobox-options-${Ve()}`;o({el:n.optionsRef,$el:n.optionsRef}),me(()=>{n.optionsPropsRef.value.static=e.static}),me(()=>{n.optionsPropsRef.value.hold=e.hold});let r=Dt(),l=E(()=>r!==null?(r.value&Ie.Open)===Ie.Open:n.comboboxState.value===0);return Rn({container:E(()=>N(n.optionsRef)),enabled:E(()=>n.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}}),()=>{var u,c,a;let d={open:n.comboboxState.value===0},f={"aria-labelledby":(a=(u=N(n.labelRef))==null?void 0:u.id)!=null?a:(c=N(n.buttonRef))==null?void 0:c.id,id:i,ref:n.optionsRef,role:"listbox","aria-multiselectable":n.mode.value===1?!0:void 0},g=Ne(e,["hold"]);return Ce({ourProps:f,theirProps:g,slot:d,attrs:s,slots:n.virtual.value&&n.comboboxState.value===0?{...t,default:()=>[Se(Fn,{},t.default)]}:t,features:we.RenderStrategy|we.Static,visible:l.value,name:"ComboboxOptions"})}}}),Vn=ne({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:s,attrs:t,expose:o}){let n=be("ComboboxOption"),i=`headlessui-combobox-option-${Ve()}`,r=B(null);o({el:r,$el:r});let l=E(()=>{var I;return n.virtual.value?n.activeOptionIndex.value===n.calculateIndex(e.value):n.activeOptionIndex.value===null?!1:((I=n.options.value[n.activeOptionIndex.value])==null?void 0:I.id)===i}),u=E(()=>n.isSelected(e.value)),c=nt(xt,null),a=E(()=>({disabled:e.disabled,value:e.value,domRef:r,order:E(()=>e.order)}));ge(()=>n.registerOption(i,a)),Ht(()=>n.unregisterOption(i,l.value)),me(()=>{let I=N(r);I&&(c==null||c.value.measureElement(I))}),me(()=>{n.comboboxState.value===0&&l.value&&(n.virtual.value||n.activationTrigger.value!==0&&st(()=>{var I,k;return(k=(I=N(r))==null?void 0:I.scrollIntoView)==null?void 0:k.call(I,{block:"nearest"})}))});function d(I){var k;if(e.disabled||(k=n.virtual.value)!=null&&k.disabled(e.value))return I.preventDefault();n.selectOption(i),Wt()||requestAnimationFrame(()=>{var L;return(L=N(n.inputRef))==null?void 0:L.focus({preventScroll:!0})}),n.mode.value===0&&requestAnimationFrame(()=>n.closeCombobox())}function f(){var I;if(e.disabled||(I=n.virtual.value)!=null&&I.disabled(e.value))return n.goToOption(V.Nothing);let k=n.calculateIndex(e.value);n.goToOption(V.Specific,k)}let g=Cn();function O(I){g.update(I)}function R(I){var k;if(!g.wasMoved(I)||e.disabled||(k=n.virtual.value)!=null&&k.disabled(e.value)||l.value)return;let L=n.calculateIndex(e.value);n.goToOption(V.Specific,L,0)}function T(I){var k;g.wasMoved(I)&&(e.disabled||(k=n.virtual.value)!=null&&k.disabled(e.value)||l.value&&(n.optionsPropsRef.value.hold||n.goToOption(V.Nothing)))}return()=>{let{disabled:I}=e,k={active:l.value,selected:u.value,disabled:I},L={id:i,ref:r,role:"option",tabIndex:I===!0?void 0:-1,"aria-disabled":I===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onClick:d,onFocus:f,onPointerenter:O,onMouseenter:O,onPointermove:R,onMousemove:R,onPointerleave:T,onMouseleave:T},y=Ne(e,["order","value"]);return Ce({ourProps:L,theirProps:y,slot:k,attrs:t,slots:s,name:"ComboboxOption"})}}});function Q(e){return Array.isArray?Array.isArray(e):Ot(e)==="[object Array]"}const jn=1/0;function Dn(e){if(typeof e=="string")return e;let s=e+"";return s=="0"&&1/e==-jn?"-0":s}function Kn(e){return e==null?"":Dn(e)}function Y(e){return typeof e=="string"}function It(e){return typeof e=="number"}function Un(e){return e===!0||e===!1||Hn(e)&&Ot(e)=="[object Boolean]"}function St(e){return typeof e=="object"}function Hn(e){return St(e)&&e!==null}function K(e){return e!=null}function $e(e){return!e.trim().length}function Ot(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Wn="Incorrect 'index' type",qn=e=>`Invalid value for key ${e}`,Gn=e=>`Pattern length exceeds max of ${e}.`,Yn=e=>`Missing ${e} property in key`,Xn=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ye=Object.prototype.hasOwnProperty;class Jn{constructor(s){this._keys=[],this._keyMap={};let t=0;s.forEach(o=>{let n=wt(o);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(o=>{o.weight/=t})}get(s){return this._keyMap[s]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function wt(e){let s=null,t=null,o=null,n=1,i=null;if(Y(e)||Q(e))o=e,s=Xe(e),t=_e(e);else{if(!Ye.call(e,"name"))throw new Error(Yn("name"));const r=e.name;if(o=r,Ye.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(Xn(r));s=Xe(r),t=_e(r),i=e.getFn}return{path:s,id:t,weight:n,src:o,getFn:i}}function Xe(e){return Q(e)?e:e.split(".")}function _e(e){return Q(e)?e.join("."):e}function Qn(e,s){let t=[],o=!1;const n=(i,r,l)=>{if(K(i))if(!r[l])t.push(i);else{let u=r[l];const c=i[u];if(!K(c))return;if(l===r.length-1&&(Y(c)||It(c)||Un(c)))t.push(Kn(c));else if(Q(c)){o=!0;for(let a=0,d=c.length;a<d;a+=1)n(c[a],r,l+1)}else r.length&&n(c,r,l+1)}};return n(e,Y(s)?s.split("."):s,0),o?t:t[0]}const Zn={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},es={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,s)=>e.score===s.score?e.idx<s.idx?-1:1:e.score<s.score?-1:1},ts={location:0,threshold:.6,distance:100},ns={useExtendedSearch:!1,getFn:Qn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var C={...es,...Zn,...ts,...ns};const ss=/[^ ]+/g;function os(e=1,s=3){const t=new Map,o=Math.pow(10,s);return{get(n){const i=n.match(ss).length;if(t.has(i))return t.get(i);const r=1/Math.pow(i,.5*e),l=parseFloat(Math.round(r*o)/o);return t.set(i,l),l},clear(){t.clear()}}}class je{constructor({getFn:s=C.getFn,fieldNormWeight:t=C.fieldNormWeight}={}){this.norm=os(t,3),this.getFn=s,this.isCreated=!1,this.setIndexRecords()}setSources(s=[]){this.docs=s}setIndexRecords(s=[]){this.records=s}setKeys(s=[]){this.keys=s,this._keysMap={},s.forEach((t,o)=>{this._keysMap[t.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Y(this.docs[0])?this.docs.forEach((s,t)=>{this._addString(s,t)}):this.docs.forEach((s,t)=>{this._addObject(s,t)}),this.norm.clear())}add(s){const t=this.size();Y(s)?this._addString(s,t):this._addObject(s,t)}removeAt(s){this.records.splice(s,1);for(let t=s,o=this.size();t<o;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(s,t){return s[this._keysMap[t]]}size(){return this.records.length}_addString(s,t){if(!K(s)||$e(s))return;let o={v:s,i:t,n:this.norm.get(s)};this.records.push(o)}_addObject(s,t){let o={i:t,$:{}};this.keys.forEach((n,i)=>{let r=n.getFn?n.getFn(s):this.getFn(s,n.path);if(K(r)){if(Q(r)){let l=[];const u=[{nestedArrIndex:-1,value:r}];for(;u.length;){const{nestedArrIndex:c,value:a}=u.pop();if(K(a))if(Y(a)&&!$e(a)){let d={v:a,i:c,n:this.norm.get(a)};l.push(d)}else Q(a)&&a.forEach((d,f)=>{u.push({nestedArrIndex:f,value:d})})}o.$[i]=l}else if(Y(r)&&!$e(r)){let l={v:r,n:this.norm.get(r)};o.$[i]=l}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function Mt(e,s,{getFn:t=C.getFn,fieldNormWeight:o=C.fieldNormWeight}={}){const n=new je({getFn:t,fieldNormWeight:o});return n.setKeys(e.map(wt)),n.setSources(s),n.create(),n}function is(e,{getFn:s=C.getFn,fieldNormWeight:t=C.fieldNormWeight}={}){const{keys:o,records:n}=e,i=new je({getFn:s,fieldNormWeight:t});return i.setKeys(o),i.setIndexRecords(n),i}function xe(e,{errors:s=0,currentLocation:t=0,expectedLocation:o=0,distance:n=C.distance,ignoreLocation:i=C.ignoreLocation}={}){const r=s/e.length;if(i)return r;const l=Math.abs(o-t);return n?r+l/n:l?1:r}function ls(e=[],s=C.minMatchCharLength){let t=[],o=-1,n=-1,i=0;for(let r=e.length;i<r;i+=1){let l=e[i];l&&o===-1?o=i:!l&&o!==-1&&(n=i-1,n-o+1>=s&&t.push([o,n]),o=-1)}return e[i-1]&&i-o>=s&&t.push([o,i-1]),t}const le=32;function rs(e,s,t,{location:o=C.location,distance:n=C.distance,threshold:i=C.threshold,findAllMatches:r=C.findAllMatches,minMatchCharLength:l=C.minMatchCharLength,includeMatches:u=C.includeMatches,ignoreLocation:c=C.ignoreLocation}={}){if(s.length>le)throw new Error(Gn(le));const a=s.length,d=e.length,f=Math.max(0,Math.min(o,d));let g=i,O=f;const R=l>1||u,T=R?Array(d):[];let I;for(;(I=e.indexOf(s,O))>-1;){let x=xe(s,{currentLocation:I,expectedLocation:f,distance:n,ignoreLocation:c});if(g=Math.min(x,g),O=I+a,R){let h=0;for(;h<a;)T[I+h]=1,h+=1}}O=-1;let k=[],L=1,y=a+d;const _=1<<a-1;for(let x=0;x<a;x+=1){let h=0,A=y;for(;h<A;)xe(s,{errors:x,currentLocation:f+A,expectedLocation:f,distance:n,ignoreLocation:c})<=g?h=A:y=A,A=Math.floor((y-h)/2+h);y=A;let m=Math.max(1,f-A+1),b=r?d:Math.min(f+A,d)+a,M=Array(b+2);M[b+1]=(1<<x)-1;for(let v=b;v>=m;v-=1){let S=v-1,w=t[e.charAt(S)];if(R&&(T[S]=+!!w),M[v]=(M[v+1]<<1|1)&w,x&&(M[v]|=(k[v+1]|k[v])<<1|1|k[v+1]),M[v]&_&&(L=xe(s,{errors:x,currentLocation:S,expectedLocation:f,distance:n,ignoreLocation:c}),L<=g)){if(g=L,O=S,O<=f)break;m=Math.max(1,2*f-O)}}if(xe(s,{errors:x+1,currentLocation:f,expectedLocation:f,distance:n,ignoreLocation:c})>g)break;k=M}const $={isMatch:O>=0,score:Math.max(.001,L)};if(R){const x=ls(T,l);x.length?u&&($.indices=x):$.isMatch=!1}return $}function as(e){let s={};for(let t=0,o=e.length;t<o;t+=1){const n=e.charAt(t);s[n]=(s[n]||0)|1<<o-t-1}return s}class Et{constructor(s,{location:t=C.location,threshold:o=C.threshold,distance:n=C.distance,includeMatches:i=C.includeMatches,findAllMatches:r=C.findAllMatches,minMatchCharLength:l=C.minMatchCharLength,isCaseSensitive:u=C.isCaseSensitive,ignoreLocation:c=C.ignoreLocation}={}){if(this.options={location:t,threshold:o,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?s:s.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(f,g)=>{this.chunks.push({pattern:f,alphabet:as(f),startIndex:g})},d=this.pattern.length;if(d>le){let f=0;const g=d%le,O=d-g;for(;f<O;)a(this.pattern.substr(f,le),f),f+=le;if(g){const R=d-le;a(this.pattern.substr(R),R)}}else a(this.pattern,0)}searchIn(s){const{isCaseSensitive:t,includeMatches:o}=this.options;if(t||(s=s.toLowerCase()),this.pattern===s){let O={isMatch:!0,score:0};return o&&(O.indices=[[0,s.length-1]]),O}const{location:n,distance:i,threshold:r,findAllMatches:l,minMatchCharLength:u,ignoreLocation:c}=this.options;let a=[],d=0,f=!1;this.chunks.forEach(({pattern:O,alphabet:R,startIndex:T})=>{const{isMatch:I,score:k,indices:L}=rs(s,O,R,{location:n+T,distance:i,threshold:r,findAllMatches:l,minMatchCharLength:u,includeMatches:o,ignoreLocation:c});I&&(f=!0),d+=k,I&&L&&(a=[...a,...L])});let g={isMatch:f,score:f?d/this.chunks.length:1};return f&&o&&(g.indices=a),g}}class se{constructor(s){this.pattern=s}static isMultiMatch(s){return Je(s,this.multiRegex)}static isSingleMatch(s){return Je(s,this.singleRegex)}search(){}}function Je(e,s){const t=e.match(s);return t?t[1]:null}class us extends se{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const t=s===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class cs extends se{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const o=s.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,s.length-1]}}}class ds extends se{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const t=s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class hs extends se{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const t=!s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class fs extends se{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const t=s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[s.length-this.pattern.length,s.length-1]}}}class ps extends se{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const t=!s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class kt extends se{constructor(s,{location:t=C.location,threshold:o=C.threshold,distance:n=C.distance,includeMatches:i=C.includeMatches,findAllMatches:r=C.findAllMatches,minMatchCharLength:l=C.minMatchCharLength,isCaseSensitive:u=C.isCaseSensitive,ignoreLocation:c=C.ignoreLocation}={}){super(s),this._bitapSearch=new Et(s,{location:t,threshold:o,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(s){return this._bitapSearch.searchIn(s)}}class Ct extends se{constructor(s){super(s)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(s){let t=0,o;const n=[],i=this.pattern.length;for(;(o=s.indexOf(this.pattern,t))>-1;)t=o+i,n.push([o,t-1]);const r=!!n.length;return{isMatch:r,score:r?0:1,indices:n}}}const Pe=[us,Ct,ds,hs,ps,fs,cs,kt],Qe=Pe.length,vs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ms="|";function gs(e,s={}){return e.split(ms).map(t=>{let o=t.trim().split(vs).filter(i=>i&&!!i.trim()),n=[];for(let i=0,r=o.length;i<r;i+=1){const l=o[i];let u=!1,c=-1;for(;!u&&++c<Qe;){const a=Pe[c];let d=a.isMultiMatch(l);d&&(n.push(new a(d,s)),u=!0)}if(!u)for(c=-1;++c<Qe;){const a=Pe[c];let d=a.isSingleMatch(l);if(d){n.push(new a(d,s));break}}}return n})}const bs=new Set([kt.type,Ct.type]);class ys{constructor(s,{isCaseSensitive:t=C.isCaseSensitive,includeMatches:o=C.includeMatches,minMatchCharLength:n=C.minMatchCharLength,ignoreLocation:i=C.ignoreLocation,findAllMatches:r=C.findAllMatches,location:l=C.location,threshold:u=C.threshold,distance:c=C.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:o,minMatchCharLength:n,findAllMatches:r,ignoreLocation:i,location:l,threshold:u,distance:c},this.pattern=t?s:s.toLowerCase(),this.query=gs(this.pattern,this.options)}static condition(s,t){return t.useExtendedSearch}searchIn(s){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:n}=this.options;s=n?s:s.toLowerCase();let i=0,r=[],l=0;for(let u=0,c=t.length;u<c;u+=1){const a=t[u];r.length=0,i=0;for(let d=0,f=a.length;d<f;d+=1){const g=a[d],{isMatch:O,indices:R,score:T}=g.search(s);if(O){if(i+=1,l+=T,o){const I=g.constructor.type;bs.has(I)?r=[...r,...R]:r.push(R)}}else{l=0,i=0,r.length=0;break}}if(i){let d={isMatch:!0,score:l/i};return o&&(d.indices=r),d}}return{isMatch:!1,score:1}}}const Le=[];function xs(...e){Le.push(...e)}function Fe(e,s){for(let t=0,o=Le.length;t<o;t+=1){let n=Le[t];if(n.condition(e,s))return new n(e,s)}return new Et(e,s)}const ke={AND:"$and",OR:"$or"},ze={PATH:"$path",PATTERN:"$val"},Be=e=>!!(e[ke.AND]||e[ke.OR]),Is=e=>!!e[ze.PATH],Ss=e=>!Q(e)&&St(e)&&!Be(e),Ze=e=>({[ke.AND]:Object.keys(e).map(s=>({[s]:e[s]}))});function Rt(e,s,{auto:t=!0}={}){const o=n=>{let i=Object.keys(n);const r=Is(n);if(!r&&i.length>1&&!Be(n))return o(Ze(n));if(Ss(n)){const u=r?n[ze.PATH]:i[0],c=r?n[ze.PATTERN]:n[u];if(!Y(c))throw new Error(qn(u));const a={keyId:_e(u),pattern:c};return t&&(a.searcher=Fe(c,s)),a}let l={children:[],operator:i[0]};return i.forEach(u=>{const c=n[u];Q(c)&&c.forEach(a=>{l.children.push(o(a))})}),l};return Be(e)||(e=Ze(e)),o(e)}function Os(e,{ignoreFieldNorm:s=C.ignoreFieldNorm}){e.forEach(t=>{let o=1;t.matches.forEach(({key:n,norm:i,score:r})=>{const l=n?n.weight:null;o*=Math.pow(r===0&&l?Number.EPSILON:r,(l||1)*(s?1:i))}),t.score=o})}function ws(e,s){const t=e.matches;s.matches=[],K(t)&&t.forEach(o=>{if(!K(o.indices)||!o.indices.length)return;const{indices:n,value:i}=o;let r={indices:n,value:i};o.key&&(r.key=o.key.src),o.idx>-1&&(r.refIndex=o.idx),s.matches.push(r)})}function Ms(e,s){s.score=e.score}function Es(e,s,{includeMatches:t=C.includeMatches,includeScore:o=C.includeScore}={}){const n=[];return t&&n.push(ws),o&&n.push(Ms),e.map(i=>{const{idx:r}=i,l={item:s[r],refIndex:r};return n.length&&n.forEach(u=>{u(i,l)}),l})}class de{constructor(s,t={},o){this.options={...C,...t},this.options.useExtendedSearch,this._keyStore=new Jn(this.options.keys),this.setCollection(s,o)}setCollection(s,t){if(this._docs=s,t&&!(t instanceof je))throw new Error(Wn);this._myIndex=t||Mt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(s){K(s)&&(this._docs.push(s),this._myIndex.add(s))}remove(s=()=>!1){const t=[];for(let o=0,n=this._docs.length;o<n;o+=1){const i=this._docs[o];s(i,o)&&(this.removeAt(o),o-=1,n-=1,t.push(i))}return t}removeAt(s){this._docs.splice(s,1),this._myIndex.removeAt(s)}getIndex(){return this._myIndex}search(s,{limit:t=-1}={}){const{includeMatches:o,includeScore:n,shouldSort:i,sortFn:r,ignoreFieldNorm:l}=this.options;let u=Y(s)?Y(this._docs[0])?this._searchStringList(s):this._searchObjectList(s):this._searchLogical(s);return Os(u,{ignoreFieldNorm:l}),i&&u.sort(r),It(t)&&t>-1&&(u=u.slice(0,t)),Es(u,this._docs,{includeMatches:o,includeScore:n})}_searchStringList(s){const t=Fe(s,this.options),{records:o}=this._myIndex,n=[];return o.forEach(({v:i,i:r,n:l})=>{if(!K(i))return;const{isMatch:u,score:c,indices:a}=t.searchIn(i);u&&n.push({item:i,idx:r,matches:[{score:c,value:i,norm:l,indices:a}]})}),n}_searchLogical(s){const t=Rt(s,this.options),o=(l,u,c)=>{if(!l.children){const{keyId:d,searcher:f}=l,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(u,d),searcher:f});return g&&g.length?[{idx:c,item:u,matches:g}]:[]}const a=[];for(let d=0,f=l.children.length;d<f;d+=1){const g=l.children[d],O=o(g,u,c);if(O.length)a.push(...O);else if(l.operator===ke.AND)return[]}return a},n=this._myIndex.records,i={},r=[];return n.forEach(({$:l,i:u})=>{if(K(l)){let c=o(t,l,u);c.length&&(i[u]||(i[u]={idx:u,item:l,matches:[]},r.push(i[u])),c.forEach(({matches:a})=>{i[u].matches.push(...a)}))}}),r}_searchObjectList(s){const t=Fe(s,this.options),{keys:o,records:n}=this._myIndex,i=[];return n.forEach(({$:r,i:l})=>{if(!K(r))return;let u=[];o.forEach((c,a)=>{u.push(...this._findMatches({key:c,value:r[a],searcher:t}))}),u.length&&i.push({idx:l,item:r,matches:u})}),i}_findMatches({key:s,value:t,searcher:o}){if(!K(t))return[];let n=[];if(Q(t))t.forEach(({v:i,i:r,n:l})=>{if(!K(i))return;const{isMatch:u,score:c,indices:a}=o.searchIn(i);u&&n.push({score:c,key:s,value:i,idx:r,norm:l,indices:a})});else{const{v:i,n:r}=t,{isMatch:l,score:u,indices:c}=o.searchIn(i);l&&n.push({score:u,key:s,value:i,norm:r,indices:c})}return n}}de.version="6.6.2";de.createIndex=Mt;de.parseIndex=is;de.config=C;de.parseQuery=Rt;xs(ys);function ks(e,s,t){const o=()=>{var r,l;return new de((r=q(s))!=null?r:[],(l=q(t))==null?void 0:l.fuseOptions)},n=B(o());X(()=>{var r;return(r=q(t))==null?void 0:r.fuseOptions},()=>{n.value=o()},{deep:!0}),X(()=>q(s),r=>{n.value.setCollection(r)},{deep:!0});const i=E(()=>{const r=q(t);if(r!=null&&r.matchAllWhenSearchEmpty&&!q(e))return q(s).map((u,c)=>({item:u,refIndex:c}));const l=r==null?void 0:r.resultLimit;return n.value.search(q(e),l?{limit:l}:void 0)});return{fuse:n,results:i}}const Cs=ne({components:{HComboboxOption:Vn,UIcon:Re,UAvatar:it,UKbd:ft},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const s=E(()=>{const o=e.group[e.groupAttribute];return typeof o=="function"?o(e.query):o});function t(o,{indices:n,value:i}){if(o===i)return"";let r="",l=0;n.forEach(c=>{const a=c[1]+1,d=a-c[0]>=e.query.length;r+=[i.substring(l,c[0]),d&&"<mark>",i.substring(c[0],a),d&&"</mark>"].filter(Boolean).join(""),l=a}),r+=i.substring(l);const u=r.indexOf("<mark>");return u>60&&(r=`...${r.substring(u-60)}`),r}return lt(()=>rt("$7uAxRX5Lcf")),{label:s,highlight:t}}}),Rs=["aria-label"],As=["innerHTML"];function $s(e,s,t,o,n,i){const r=Re,l=it,u=ft,c=ve("HComboboxOption");return F(),U("div",{class:z(e.ui.group.wrapper)},[e.label?(F(),U("h2",{key:0,class:z(e.ui.group.label)},ee(e.label),3)):G("",!0),te("div",{class:z(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(F(!0),U(Oe,null,Me(e.group.commands,(a,d)=>(F(),H(c,{key:`${e.group.key}-${d}`,value:a,disabled:a.disabled,as:"template"},{default:ce(({active:f,selected:g})=>[te("div",{class:z([e.ui.group.command.base,f?e.ui.group.command.active:e.ui.group.command.inactive,a.disabled?"cursor-not-allowed":"cursor-pointer"])},[te("div",{class:z(e.ui.group.command.container)},[ue(e.$slots,`${e.group.key}-icon`,{group:e.group,command:a,active:f,selected:g},()=>[a.icon?(F(),H(r,{key:0,name:a.icon,class:z([e.ui.group.command.icon.base,f?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,a.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):a.avatar?(F(),H(l,Ee({key:1},{size:e.ui.group.command.avatar.size,...a.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):a.chip?(F(),U("span",{key:2,class:z(e.ui.group.command.chip.base),style:qt({background:`#${a.chip}`})},null,6)):G("",!0)]),te("div",{class:z([e.ui.group.command.label,a.disabled&&e.ui.group.command.disabled])},[ue(e.$slots,`${e.group.key}-command`,{group:e.group,command:a,active:f,selected:g},()=>{var O,R;return[a.prefix?(F(),U("span",{key:0,class:z(["flex-shrink-0",a.prefixClass||e.ui.group.command.prefix])},ee(a.prefix),3)):G("",!0),te("span",{class:z(["truncate",{"flex-none":a.suffix||((O=a.matches)==null?void 0:O.length)}])},ee(a[e.commandAttribute]),3),(R=a.matches)!=null&&R.length?(F(),U("span",{key:1,class:z(["truncate",a.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(a[e.commandAttribute],a.matches[0])},null,10,As)):a.suffix?(F(),U("span",{key:2,class:z(["truncate",a.suffixClass||e.ui.group.command.suffix])},ee(a.suffix),3)):G("",!0)]})],2)],2),g?(F(),H(r,{key:0,name:e.selectedIcon,class:z(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):f&&(e.group.active||e.$slots[`${e.group.key}-active`])?ue(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:a,active:f,selected:g},()=>[e.group.active?(F(),U("span",{key:0,class:z(e.ui.group.active)},ee(e.group.active),3)):G("",!0)]):ue(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:a,active:f,selected:g},()=>{var O;return[(O=a.shortcuts)!=null&&O.length?(F(),U("span",{key:0,class:z(e.ui.group.command.shortcuts)},[(F(!0),U(Oe,null,Me(a.shortcuts,R=>(F(),H(u,{key:R},{default:ce(()=>[Gt(ee(R),1)]),_:2},1024))),128))],2)):!a.disabled&&e.group.inactive?(F(),U("span",{key:1,class:z(e.ui.group.inactive)},ee(e.group.inactive),3)):G("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Rs)],2)}const Ts=ot(Cs,[["render",$s]]),re=Yt(He.ui.strategy,He.ui.commandPalette,fn),_s=ne({components:{HCombobox:zn,HComboboxInput:Bn,HComboboxOptions:Nn,UIcon:Re,UButton:at,CommandPaletteGroup:Ts},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>re.default.icon},loadingIcon:{type:String,default:()=>re.default.loadingIcon},selectedIcon:{type:String,default:()=>re.default.selectedIcon},closeButton:{type:Object,default:()=>re.default.closeButton},emptyState:{type:Object,default:()=>re.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:s,expose:t}){const{ui:o,attrs:n}=ut("commandPalette",Te(e,"ui"),re,Te(e,"class")),i=B(""),r=B(),l=B(null),u=B(!1);ge(()=>{e.autoselect&&y()}),ge(()=>{setTimeout(()=>{var A;const x=(A=r.value)==null?void 0:A.$.provides;if(!x)return;const h=Object.getOwnPropertySymbols(x);l.value=h.length&&x[h[0]]},200)});const c=E(()=>ct({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),a=E(()=>{var h;const x=[];for(const A of e.groups)A.search||x.push(...((h=A.commands)==null?void 0:h.map(m=>({...m,group:A.key})))||[]);return x}),d=B({}),{results:f}=ks(i,a,c);function g(x,h){if(x)return x.filter&&typeof x.filter=="function"&&(h=x.filter(i.value,h)),{...x,commands:h.slice(0,c.value.resultLimit)}}const O=E(()=>{if(!f.value)return[];const x=f.value.reduce((m,b)=>{var v;const{item:M,...p}=b;return M.group&&(m[v=M.group]||(m[v]=[]),m[M.group].push({...M,...p})),m},{}),h=Object.entries(x).map(([m,b])=>{const M=e.groups.find(p=>p.key===m);return M?g(M,b):null}).filter(Boolean),A=e.groups.filter(m=>{var b;return!!m.search&&((b=d.value[m.key])==null?void 0:b.length)}).map(m=>{const b=d.value[m.key]||[];return g(m,[...b])});return[...h,...A]}),R=dt(async()=>{const x=e.groups.filter(h=>!!h.search);x.length&&(u.value=!0,await Promise.all(x.map(async h=>{d.value[h.key]=await h.search(i.value)})),u.value=!1,L())},e.debounce);X(i,()=>{R(),L()});const T=E(()=>(e.loading||u.value)&&e.loadingIcon?e.loadingIcon:e.icon),I=E(()=>Xt(o.value.input.icon.base,o.value.input.icon.size,(e.loading||u.value)&&e.loadingIcon&&o.value.input.icon.loading)),k=E(()=>({...o.value.default.emptyState,...e.emptyState}));function L(){setTimeout(()=>{var x;(x=r.value)==null||x.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function y(){setTimeout(()=>{var x;(x=r.value)==null||x.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function _(x){s("update:modelValue",x,{query:i.value}),e.autoclear&&setTimeout(()=>{i.value=""},0)}function $(){i.value?i.value="":s("close")}return t({query:i,updateQuery:x=>{i.value=x},comboboxApi:l,results:f}),lt(()=>rt("$t8Xu5RUkEA")),{ui:o,attrs:n,groups:O,comboboxInput:r,query:i,iconName:T,iconClass:I,emptyState:k,onSelect:_,onClear:$}}});function Ps(e,s,t,o,n,i){const r=Re,l=ve("HComboboxInput"),u=at,c=ve("CommandPaletteGroup"),a=ve("HComboboxOptions"),d=ve("HCombobox");return F(),H(d,Ee({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:ce(()=>[Jt(te("div",{class:z(e.ui.input.wrapper)},[e.iconName?(F(),H(r,{key:0,name:e.iconName,class:z(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),ht(l,{ref:"comboboxInput",value:e.query,class:z([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:s[0]||(s[0]=f=>e.query=f.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(F(),H(u,Ee({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):G("",!0)],2),[[Qt,e.searchable]]),e.groups.length?(F(),H(a,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:z(e.ui.container)},{default:ce(()=>[(F(!0),U(Oe,null,Me(e.groups,f=>(F(),H(c,{key:f.key,query:e.query,group:f,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},Zt({_:2},[Me(e.$slots,(g,O)=>({name:O,fn:ce(R=>[ue(e.$slots,O,en(tn(R)))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?ue(e.$slots,"empty-state",{key:1},()=>[te("div",{class:z(e.ui.emptyState.wrapper)},[e.emptyState.icon?(F(),H(r,{key:0,name:e.emptyState.icon,class:z(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),te("p",{class:z(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},ee(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):G("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const Ls=ot(_s,[["render",Ps]]),At=e=>{if(!e.children)return e._path;for(const s of(e==null?void 0:e.children)||[]){const t=At(s);if(t)return t}},$t=(e,s)=>{for(const t of s){if(t._path===e&&!t._id)return t.children;if(t.children){const o=$t(e,t.children);if(o)return o}}},Tt=(e,s)=>{for(const t of s){if(t._path===e)return t;if(t.children){const o=Tt(e,t.children);if(o)return o}}},Fs=(e,s,t)=>{let o;const n=(i,r)=>{for(const l of r)if(!(i!=="/"&&l._path==="/")){if(i!=null&&i.startsWith(l._path)&&l[s]&&(o=l[s]),l._path===i)return;l.children&&n(i,l.children)}};return n(e,t),o},zs=()=>({navBottomLink:At,navDirFromPath:$t,navPageFromPath:Tt,navKeyFromPath:Fs});function Bs(...e){return E(()=>e.every(s=>q(s)))}function Ns(e){return E(()=>!q(e))}const Vs=/^[^-]+.*-.*[^-]+$/,js=/^[^_]+.*_.*[^_]+$/,Ds=(e,s={})=>{const{macOS:t,usingInput:o}=pt();let n=[];const i=B([]),r=()=>{i.value.splice(0,i.value.length)},l=dt(r,s.chainDelay??800),u=c=>{if(!c.key)return;const a=/^[a-z]{1}$/i.test(c.key);let d;if(i.value.push(c.key),i.value.length>=2){d=i.value.slice(-2).join("-");for(const f of n.filter(g=>g.chained))if(f.key===d){f.condition.value&&(c.preventDefault(),f.handler()),r();return}}for(const f of n.filter(g=>!g.chained))if(c.key.toLowerCase()===f.key&&c.metaKey===f.metaKey&&c.ctrlKey===f.ctrlKey&&!(a&&c.shiftKey!==f.shiftKey)){f.condition.value&&(c.preventDefault(),f.handler()),r();return}l()};n=Object.entries(e).map(([c,a])=>{var O,R;if(!a)return null;let d;c.includes("-")&&c!=="-"&&!((O=c.match(Vs))!=null&&O.length)&&console.trace(`[Shortcut] Invalid key: "${c}"`),c.includes("_")&&c!=="_"&&!((R=c.match(js))!=null&&R.length)&&console.trace(`[Shortcut] Invalid key: "${c}"`);const f=c.includes("-")&&c!=="-";if(f)d={key:c.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const T=c.toLowerCase().split("_").map(I=>I);d={key:T.filter(I=>!["meta","ctrl","shift","alt"].includes(I)).join("_"),metaKey:T.includes("meta"),ctrlKey:T.includes("ctrl"),shiftKey:T.includes("shift"),altKey:T.includes("alt")}}if(d.chained=f,!t.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof a=="function"?d.handler=a:typeof a=="object"&&(d={...d,handler:a.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const g=[];return a.usingInput?typeof a.usingInput=="string"&&g.push(E(()=>o.value===a.usingInput)):g.push(Ns(o)),d.condition=Bs(...g,...a.whenever||[]),d}).filter(Boolean),nn("keydown",u)},qs=ne({inheritAttrs:!1,__name:"ContentSearch",props:{modelValue:{type:Boolean,default:void 0},files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:s,emit:t}){const o=sn(),n=E(()=>({padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-dvh sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10"},fileIcon:{name:"i-heroicons-document-text"},default:{closeButton:{icon:o.ui.icons.close,color:"gray",variant:"ghost",size:"sm"}}})),i=e,r=t,l=on(),{navKeyFromPath:u}=zs(),{usingInput:c}=pt(),{isContentSearchModalOpen:a}=ln(),d=rn(dn),f=an(),{ui:g,attrs:O}=ut("content.search",Te(i,"ui"),n,void 0,!0),R=d.smaller("sm"),T=B();function I(p){var v;return p.icon?p.icon:(v=p.navigation)!=null&&v.icon?p.navigation.icon:(i.navigation&&(p.icon=u(p._path,"icon",i.navigation)),p.icon||g.value.fileIcon.name)}const k=E({get(){return i.modelValue!==void 0?i.modelValue:a.value},set(p){i.modelValue!==void 0?r("update:modelValue",p):a.value=p}}),L=E(()=>ct({},i.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function y(p,v){return p?v:v==null?void 0:v.filter(S=>!S.child)}const _=E(()=>{var v,S;let p=[];return(v=i.navigation)!=null&&v.length&&(i.navigation.some(w=>{var P;return!!((P=w.children)!=null&&P.length)})?p=(i.navigation||[]).map(w=>({key:w._path,label:w.title,commands:(i.files||[]).filter(P=>{var j;return(j=P._path)==null?void 0:j.startsWith(w._path)}).flatMap(P=>x(P,w)),filter:y})):p=[{key:"docs",commands:(i.files||[]).flatMap(w=>x(w)),filter:y}]),[((S=i.links)==null?void 0:S.length)&&{key:"links",label:"Links",commands:i.links.flatMap(w=>[w.to&&{id:l.resolve(w.to).fullPath,...w,icon:w.icon||g.value.fileIcon.name},...(w.children||[]).map(P=>({id:l.resolve(P.to).fullPath,prefix:w.label,suffix:P.description,...P,icon:P.icon||w.icon||g.value.fileIcon.name}))]).filter(Boolean)},...p,...i.groups||[],!(f!=null&&f.forced)&&!i.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:o.ui.icons.light,disabled:f.preference==="light",click:()=>{f.preference="light"}},{id:"theme-dark",label:"Dark",icon:o.ui.icons.dark,disabled:f.preference==="dark",click:()=>{f.preference="dark"}}]}].filter(Boolean)}),$=E(()=>k.value||!c.value);function x(p,v){var w,P,j,oe,he;const S=(w=hn((v==null?void 0:v.children)||[],p))==null?void 0:w.map(({title:W})=>W).join(" > ");return[{id:p._id,label:((P=p.navigation)==null?void 0:P.title)||p.title,title:((j=p.navigation)==null?void 0:j.title)||p.title,prefix:S,to:p._path,suffix:p.description,children:A(m(((oe=p==null?void 0:p.body)==null?void 0:oe.children)||[])),icon:I(p)},...Object.entries(b(((he=p==null?void 0:p.body)==null?void 0:he.children)||[])).map(([W,{title:ie,children:ye}])=>{var fe;if(ie)return{id:`${p._path}${W}`,label:ie,prefix:(S?`${S} > `:"")+`${((fe=p.navigation)==null?void 0:fe.title)||p.title}`,to:`${p._path}${W}`,children:A(ye),icon:I(p),child:!0}})].filter(Boolean)}function h(p){return(p==null?void 0:p.map(v=>{var S,w;if(["code","code-inline","em","a","strong"].includes(v.tag))return{type:"text",value:((w=(S=v.children)==null?void 0:S.find(P=>P.type==="text"))==null?void 0:w.value)||""};if(v.type==="text")return v}).filter(Boolean))||[]}function A(p){return p.map(v=>{if(["pre","style","video"].includes(v.tag))return;let S=[...v.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(v.tag)&&S.length?(S=h(S).reduce((w,P)=>(w.length&&w[w.length-1].type==="text"?w[w.length-1].value+=P.value||"":w.push({...P}),w),[]),{...v,children:S}):{...v,children:A(S)}}).filter(Boolean)}function m(p){const v=[];for(const S of p){if(["h1","h2","h3"].includes(S.tag))break;v.push(S)}return v}function b(p){var P,j,oe,he;const v={};let S="",w="";for(const W of p)["h1","h2","h3"].includes(W.tag)&&(w=((oe=(j=(P=W.children)==null?void 0:P.map(ie=>{var ye,fe;if(ie.type==="text")return ie.value;if(["code","code-inline","em","a","strong"].includes(ie.tag))return(fe=(ye=ie.children)==null?void 0:ye.find(_t=>_t.type==="text"))==null?void 0:fe.value}))==null?void 0:j.filter(Boolean))==null?void 0:oe.join(" "))||"",w&&((he=W.props)!=null&&he.id)&&(S=`#${encodeURIComponent(W.props.id)}`)),v[S]?v[S].children.push(W):v[S]={children:[W],title:w};return v}function M(p){k.value=!1;const v=p[0];v&&(v.click?v.click():v.to?v.target==="_blank"||v.to.startsWith("http")?window.open(v.to,v.target||"_blank"):l.push(v.to):v.href&&window.open(v.href,"_blank"))}return Ds({meta_k:{usingInput:!0,whenever:[$],handler:()=>{k.value=!k.value}},escape:{usingInput:!0,whenever:[k],handler:()=>{k.value=!1}}}),s({commandPaletteRef:T}),(p,v)=>{const S=Ls,w=cn;return F(),H(w,{modelValue:D(k),"onUpdate:modelValue":v[1]||(v[1]=P=>un(k)?k.value=P:null),overlay:!D(R),transition:!D(R),ui:D(g)},{default:ce(()=>[ht(S,Ee({ref_key:"commandPaletteRef",ref:T,"model-value":[],groups:D(_),ui:D(g).commandPalette,"close-button":D(g).default.closeButton,fuse:D(L),multiple:""},D(O),{"onUpdate:modelValue":M,onClose:v[0]||(v[0]=P=>k.value=!1)}),null,16,["groups","ui","close-button","fuse"])]),_:1},8,["modelValue","overlay","transition","ui"])}}});export{qs as default};
